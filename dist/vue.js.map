{"version":3,"file":"vue.js","sources":["../src/observe/array.js","../src/observe/watcher.js","../src/observe/dep.js","../src/observe/index.js","../src/state.js","../src/compiler/parse.js","../src/compiler/index.js","../src/vdom/index.js","../src/vdom/patch.js","../src/lifecycle.js","../src/utils.js","../src/init.js","../src/globalAPI.js","../src/index.js"],"sourcesContent":["let oldArrayProto = Array.prototype;\nexport let newArrayProto = Object.create(oldArrayProto);\nlet methods = [\"push\", \"pop\", \"shift\", \"unshift\", \"reverse\", \"sort\", \"splice\"];\nmethods.forEach((method) => {\n  newArrayProto[method] = function (...args) {\n    const result = oldArrayProto[method].call(this, ...args);\n    let inserted;\n    let ob = this.__ob__;\n    switch (method) {\n      case \"push\":\n      case \"unshift\":\n        inserted = args;\n        break;\n      case \"splice\":\n        inserted = args.slice(2);\n        break;\n      default:\n        break;\n    }\n    if (inserted) {\n      ob.observeArray(inserted);\n    }\n\n    // 更新\n    ob.dep.notify();\n    return result;\n  };\n});\n","import Dep, { popTarget, pushTarget } from \"./dep\";\n\nlet id = 0;\n\n//每个属性有一个dep（属性就是被观察者），watcher就是观察者（属性变化了会通知观察者来更新）->观察者模式\nclass Watcher {\n  // exprOrFn 可能是字符串(watch监控时调用Watcher) cb ：watch监控data属性变化时所触发的函数\n  constructor(vm, exprOrFn, options, cb) {\n    // +++++++++++++生命周期+++++++++++++++++\n    // callHook(vm,'beforeUpdate')\n    // +++++++++++++生命周期+++++++++++++++++\n\n    this.id = id++;\n    this.renderWatcher = options; //渲染Watcher\n    if (typeof exprOrFn === \"string\") {\n      this.getter = function () {\n        return vm[exprOrFn];\n      };\n    } else {\n      this.getter = exprOrFn;\n    }\n    this.deps = []; //收集属性dep 后续实现计算属性和属性清理时使用\n    this.depsId = new Set(); //Set函数 方便去重\n    this.lazy = options.lazy;\n    this.cb = cb;\n    this.dirty = this.lazy;\n    this.vm = vm;\n    this.user = options.user; //标识是否时用户自己的watcher\n    // watch:监控 返回oldvalue\n    this.value = this.lazy ? undefined : this.get();\n  }\n\n  addDep(dep) {\n    let id = dep.id;\n    if (!this.depsId.has(id)) {\n      this.deps.push(dep);\n      this.depsId.add(id);\n      dep.addSub(this);\n    }\n  }\n\n  evaluate() {\n    this.value = this.get(); //获取到用户函数的返回值并且标识为脏值\n    this.dirty = false;\n  }\n\n  get() {\n    pushTarget(this);\n    // 计算属性需要return的原因：返回计算属性\n    let value = this.getter.call(this.vm);\n    popTarget();\n    return value; //计算属性返回值\n  }\n\n  depend() {\n    let i = this.deps.length;\n    while (i--) {\n      this.deps[i].depend(); //让计算属性watcher 也收集渲染watcher\n    }\n  }\n\n  update() {\n    if (this.lazy) {\n      // 如果是计算属性 依赖的值变化了 就标识计算属性是脏值了\n      this.dirty = true;\n    } else {\n      queueWatcher(this);\n    }\n  }\n\n  run() {\n    let oldValue = this.value;\n    let newValue = this.get();\n    if (this.user) {\n      this.cb.call(this.vm, newValue, oldValue);\n    }\n\n    // +++++++++++++生命周期+++++++++++++++++\n    // callHook(vm,'updated')\n    // +++++++++++++生命周期+++++++++++++++++\n  }\n}\n\nlet queue = [];\nlet has = {};\nlet pending = false;\n\nfunction flushSchedulerQueue() {\n  let flushQueue = queue.slice(0);\n  queue = [];\n  has = {};\n  pending = false;\n  flushQueue.forEach((q) => q.run());\n}\n\nfunction queueWatcher(watcher) {\n  const id = watcher.id;\n  if (!has[id]) {\n    queue.push(watcher);\n    has[id] = true;\n    if (!pending) {\n      nextTick(flushSchedulerQueue, 0);\n      pending = true;\n    }\n  }\n}\n\nlet callbacks = [];\nlet waiting = false;\n\nfunction flushCallbacks() {\n  let cbs = callbacks.slice(0);\n  waiting = false;\n  callbacks = [];\n  cbs.forEach((cb) => cb());\n}\n\n// nextTick的目的不是创建一个异步任务，而是将这个任务维护到了队列而已\nexport function nextTick(cb) {\n  callbacks.push(cb);\n  if (!waiting) {\n    timerFunc();\n    waiting = true;\n  }\n}\n\nlet timerFunc; // 用来保存调用异步任务方法\n// 判断1：是否原生支持Promise\nif (typeof Promise !== \"undefined\") {\n  // 保存一个异步任务\n  const p = Promise.resolve();\n  timerFunc = () => {\n    // 执行回调函数\n    p.then(flushCallbacks);\n  };\n} else if (\n  typeof MutationObserver !== \"undefined\" ||\n  MutationObserver.toString() === \"[objectMutationObserverConstructor]\"\n) {\n  // 判断2：是否原生支持MutationObserver\n  let counter = 1;\n  const observer = new MutationObserver(flushCallbacks);\n  const textNode = document.createTextNode(String(counter));\n  observer.observe(textNode, {\n    characterData: true,\n  });\n  timerFunc = () => {\n    counter = (counter + 1) % 2;\n    textNode.data = String(counter);\n  };\n} else if (typeof setImmediate !== \"undefined\") {\n  //判断3：是否原生支持setImmediat\n  timerFunc = () => {\n    setImmediate(flushCallbacks);\n  };\n} else {\n  //判断4：上面都不行，直接用setTimeout\n  timerFunc = () => {\n    setTimeout(flushCallbacks, 0);\n  };\n}\n\nexport default Watcher;\n","import watcher from \"./watcher\";\n\nlet id = 0;\n\nclass Dep {\n  constructor() {\n    this.id = id++; //属性的dep要收集watcher\n    this.subs = []; //这里存放着当前属性对应的watcher有哪些\n  }\n\n  depend() {\n    // 移除this.subs.push(Dep.target)的原因：防止收集重复的watcher，可以在watcher类中进行去重操作\n\n    // Dep.target就是watcher的实例对象\n    Dep.target.addDep(this); //让watcher收集dep\n  }\n\n  // 添加watcher实例对象\n  addSub(watcher) {\n    this.subs.push(watcher);\n  }\n\n  notify() {\n    this.subs.forEach((watcher) => watcher.update());\n  }\n}\n\nDep.target = null;\nlet stack = [];\n\nexport function pushTarget(watcher) {\n  stack.push(watcher);\n  Dep.target = watcher;\n}\n\nexport function popTarget() {\n  stack.pop();\n  // Dep.target指向null\n  Dep.target = stack[stack.length - 1];\n}\n\nexport default Dep;\n","import { newArrayProto } from \"./array\";\nimport Dep from \"./dep\";\n\nclass Observe {\n  constructor(data) {\n    // 给每个对象都增加收集功能\n    this.dep = new Dep();\n\n    // 方便array.js文件中调用observeArray方法\n    Object.defineProperty(data, \"__ob__\", {\n      value: this,\n      enumerable: false, //将__ob__变成不可枚举（循环的时候无法获取到）\n    });\n    if (Array.isArray(data)) {\n      // 重写数组中的方法 7个变异方法 是可以修改数组本身的\n      data.__proto__ = newArrayProto;\n      this.observeArray(data);\n    } else {\n      this.walk(data);\n    }\n  }\n\n  // 遍历data中的数据并对所有的属性进行劫持\n  walk(data) {\n    Object.keys(data).forEach((key) => defineReactive(data, key, data[key]));\n  }\n\n  // 观测数组\n  observeArray(data) {\n    // 对数组中存在对象进行数据劫持\n    data.forEach((item) => observe(item));\n  }\n}\n\nfunction dependArray(value) {\n  for (let i = 0; i < value.length; i++) {\n    let current = value[i];\n    current.__ob__ && current.__ob__.dep.depend();\n    if (Array.isArray(current)) {\n      dependArray(current);\n    }\n  }\n}\n\n// 属性劫持 value=data[key]也就是属性值\nexport function defineReactive(target, key, value) {\n  let childOb = observe(value);\n  let dep = new Dep(); //每一个属性对应一个dep\n  Object.defineProperty(target, key, {\n    get() {\n      if (Dep.target) {\n        dep.depend(); //属性收集当前的watcher\n        if (childOb) {\n          childOb.dep.depend(); //数组和对象收集当前的watcher\n\n          //如果出现数组套数组的情况\n          if (Array.isArray(value)) {\n            dependArray(value);\n          }\n        }\n      }\n      return value;\n    },\n    set(newValue) {\n      if (newValue === value) return;\n      observe(newValue);\n      value = newValue;\n      dep.notify();\n    },\n  });\n}\n\nexport function observe(data) {\n  // 传递过来的data必须是对象\n  if (typeof data !== \"object\" || data == null) {\n    return;\n  }\n  // 如果data中存在__ob__属性 说明这个对象被代理过了\n  if (data.__ob__ instanceof Observe) {\n    return data.__ob__;\n  }\n  // 如果一个对象被劫持过了，那就不需要再被劫持了（要判断一个对象是否被劫持过，可以增添一个实例，用实例来判断是否被劫持过）\n  return new Observe(data);\n}\n","import { observe } from \"./observe\";\nimport Watcher, { nextTick } from \"./observe/watcher\";\nimport watcher from \"./observe/watcher\";\nimport Dep from \"./observe/dep\";\nimport Vue from \"./index\";\n\nexport function initState(vm) {\n  const options = vm.$options;\n  // 初始化data数据并对data中的数据进行数据劫持\n  if (options.data) {\n    initData(vm);\n  }\n  //初始化计算属性\n  if (options.computed) {\n    initComputed(vm);\n  }\n  //初始化watch\n  if (options.watch) {\n    initWatch(vm);\n  }\n}\n\nfunction initWatch(vm) {\n  let watch = vm.$options.watch;\n  for (let key in watch) {\n    const handler = watch[key];\n    console.log(Array.isArray(handler));\n    if (Array.isArray(handler)) {\n      for (let i = 0; i < handler.length; i++) {\n        createWatcher(vm, key, handler[i]);\n      }\n    } else {\n      createWatcher(vm, key, handler);\n    }\n  }\n}\n\nfunction createWatcher(vm, key, handler) {\n  // 传递来的handler 要么是字符串要么是函数\n  if (typeof handler === \"string\") {\n    handler = vm[handler];\n  }\n  return vm.$watch(key, handler);\n}\n\n// proxy 语法糖 本来取data中的数据需要vm._data.属 性，代理后只需vm.属性\nfunction proxy(vm, target, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[target][key];\n    },\n    set(newValue) {\n      vm[target][key] = newValue;\n    },\n  });\n}\n\nfunction initData(vm) {\n  // data可能是函数或对象\n  let data = vm.$options.data;\n  data = typeof data === \"function\" ? data.call(vm) : data;\n  vm._data = data;\n  //数据劫持\n  observe(data);\n  for (let key in data) {\n    proxy(vm, \"_data\", key);\n  }\n}\n\nfunction initComputed(vm) {\n  const computed = vm.$options.computed;\n  const watchers = (vm._computedWatchers = {});\n  for (let key in computed) {\n    let userDef = computed[key];\n\n    let fn = typeof userDef === \"function\" ? userDef : userDef.get;\n    //如果直接new Watcher默认就会执行fn 添加{lazy：true}标识fn不立即执行,将属性和watcher对应起来\n    watchers[key] = new Watcher(vm, fn, { lazy: true });\n    defineComputed(vm, key, userDef);\n  }\n}\n\nfunction defineComputed(target, key, userDef) {\n  // target:vm;key:computed的属性值\n  // const getter = typeof userDef === \"function\" ? userDef : userDef.get;\n  const setter = userDef.set || (() => {});\n\n  Object.defineProperty(target, key, {\n    get: createComputedGetter(key),\n    set: setter,\n  });\n}\n\n// 计算属性根本不会收集依赖，只会让自己的依赖属性去收集依赖\nfunction createComputedGetter(key) {\n  return function () {\n    const watcher = this._computedWatchers[key]; //获取对应属性的watcher\n    if (watcher.dirty) {\n      //   如果是脏值 就去执行\n      watcher.evaluate();\n    }\n    // 计算属性出栈后，还有渲染watcher，计算属性watcher出栈后，也要去收集上一层watcher(渲染watcher)\n    if (Dep.target) {\n      watcher.depend();\n    }\n    return watcher.value;\n  };\n}\nexport function initStateMixin(Vue) {\n  // exprOrFn：传递过来的key也就是watch里面的属性名，cb：观察的属性值发生改变所执行的函数\n  Vue.prototype.$watch = function (exprOrFn, cb) {\n    new Watcher(this, exprOrFn, { user: true }, cb);\n  };\n  Vue.prototype.$nextTick = nextTick;\n}\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); //匹配到的是一个开始标签名\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); //匹配到的是一个结束标签\nconst attribute =\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; //匹配属性\nconst startTagClose = /^\\s*(\\/?)>/; // <br/>\n\nexport function parseHTML(html) {\n  const ELEMENT_TYPE = 1;\n  const TEXT_TYPE = 3;\n  const stack = []; //用于存放元素的\n  let currentParent; //指向的是栈中的最后一个\n  let root;\n\n  function createASTElement(tag, attrs) {\n    return {\n      tag,\n      type: ELEMENT_TYPE,\n      children: [],\n      attrs,\n      parent: null,\n    };\n  }\n\n  function start(tag, attrs) {\n    let node = createASTElement(tag, attrs);\n    if (!root) {\n      root = node;\n    }\n    if (currentParent) {\n      node.parent = currentParent;\n      currentParent.children.push(node);\n    }\n    stack.push(node);\n    currentParent = node;\n  }\n\n  function chars(text) {\n    text = text.replace(/\\s/g, \"\");\n    text &&\n      currentParent.children.push({\n        type: TEXT_TYPE,\n        text,\n        parent: currentParent,\n      });\n  }\n\n  function end(tag) {\n    stack.pop();\n    currentParent = stack[stack.length - 1];\n  }\n\n  function advance(n) {\n    html = html.substring(n);\n  }\n\n  // 解析开始标签\n  function parseStartTag() {\n    const start = html.match(startTagOpen);\n    if (start) {\n      const match = {\n        tagName: start[1], //标签名\n        attrs: [],\n      };\n      advance(start[0].length);\n      let attr, end;\n      while (\n        !(end = html.match(startTagClose)) &&\n        (attr = html.match(attribute))\n      ) {\n        advance(attr[0].length);\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5] || true,\n        });\n      }\n      if (end) {\n        advance(end[0].length);\n      }\n      return match;\n    }\n    return false;\n  }\n\n  while (html) {\n    let textEnd = html.indexOf(\"<\");\n    if (textEnd === 0) {\n      const startTagMatch = parseStartTag();\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs);\n        continue;\n      }\n\n      let endTagMatch = html.match(endTag);\n      if (endTagMatch) {\n        advance(endTagMatch[0].length);\n        end(endTagMatch[1]);\n        continue;\n      }\n    }\n    if (textEnd > 0) {\n      let text = html.substring(0, textEnd);\n      if (text) {\n        chars(text);\n        advance(text.length);\n      }\n    }\n  }\n  return root;\n}\n","import { parseHTML } from \"./parse\";\n\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; //匹配到的内容就是我们表达式的变量\nfunction genProps(attrs) {\n  let str = \"\";\n  for (let i = 0; i < attrs.length; i++) {\n    let attr = attrs[i];\n    if (attr.name === \"style\") {\n      let obj = {};\n      attr.value.split(\";\").forEach((item) => {\n        let [key, value] = item.split(\":\");\n        obj[key] = value;\n      });\n      attr.value = obj;\n    }\n    str += `${attr.name}:${JSON.stringify(attr.value)},`;\n  }\n  return `{${str.slice(0, -1)}}`;\n}\n\nfunction gen(node) {\n  if (node.type === 1) {\n    return codegen(node);\n  } else {\n    let text = node.text;\n    if (!defaultTagRE.test(text)) {\n      return `_v(${JSON.stringify(text)})`;\n    } else {\n      let tokens = [];\n      let match;\n      defaultTagRE.lastIndex = 0;\n      let lastIndex = 0;\n      while ((match = defaultTagRE.exec(text))) {\n        let index = match.index;\n        if (index > lastIndex) {\n          tokens.push(JSON.stringify(text.slice(lastIndex, index)));\n        }\n        tokens.push(`_s(${match[1].trim()})`);\n        lastIndex = index + match[0].length;\n      }\n      if (lastIndex < text.length) {\n        tokens.push(JSON.stringify(text.slice(lastIndex)));\n      }\n      return `_v(${tokens.join(\"+\")})`;\n    }\n  }\n}\n\nfunction genChildren(children) {\n  if (children) {\n    return children.map((child) => gen(child)).join(\",\");\n  }\n}\n\nfunction codegen(ast) {\n  let children = genChildren(ast.children);\n  let code = `_c('${ast.tag}',${\n    ast.attrs.length > 0 ? genProps(ast.attrs) : \"null\"\n  }${ast.children.length ? `,${children}` : \"\"})`;\n  return code;\n}\n\nexport function compileToFunction(template) {\n  let ast = parseHTML(template);\n  let code = codegen(ast);\n  code = `with(this){return ${code}}`;\n  let render = new Function(code);\n  return render;\n}\n","// 判断是否为自定义标签\nconst isReservedTagg = (tag) => {\n  return [\"a\", \"div\", \"p\", \"button\", \"ul\", \"li\", \"span\"].includes(tag);\n};\n// _c\nexport function createElementVNode(vm, tag, data, ...children) {\n  if (data === null) {\n    data = {};\n  }\n  let key = data.key;\n  if (key) {\n    delete data.key;\n  }\n  // 元素标签\n  if (isReservedTagg(tag)) {\n    return vnode(vm, tag, key, data, children);\n  } else {\n    // 自定义标签\n    let Ctor = vm.$options.components[tag];\n\n    return createComponentVnode(vm, tag, key, data, children, Ctor);\n  }\n}\nfunction createComponentVnode(vm, tag, key, data, children, Ctor) {\n  if (typeof Ctor === \"object\") {\n    Ctor = vm.$options._base.extend(Ctor);\n  }\n\n  data.hook = {\n    //稍候创造真实节点的时候，如果是组件则调用此init方法\n    init(vnode) {\n      let instance = (vnode.componentInstance =\n        new vnode.componentOptions.Ctor()); //创建组件实例(new Sub())\n      // instance就是组件实例对象\n      // +++++++++++++++++++++++++++++++++++\n      // +++++++++++++++++++++++++++++++++++\n      // 组件挂载\n      // +++++++++++++++++++++++++++++++++++\n      // +++++++++++++++++++++++++++++++++++\n      instance.$mount();\n    },\n  };\n\n  return vnode(vm, tag, key, data, children, null, { Ctor });\n}\n//_v\nexport function createTextVNode(vm, text) {\n  return vnode(vm, undefined, undefined, undefined, undefined, text);\n}\n\nfunction vnode(vm, tag, key, data, children, text, componentOptions) {\n  return {\n    vm,\n    tag,\n    key,\n    data,\n    children,\n    text,\n    componentOptions,\n  };\n}\n\nexport function isSameVnode(oldVnode, newVnode) {\n  return oldVnode.tag === newVnode.tag && oldVnode.key === newVnode.key;\n}\n","import { isSameVnode } from \"./index\";\n\nfunction createComponent(vnode) {\n  let i = vnode.data;\n  if ((i = i.hook) && (i = i.init)) {\n    i(vnode);\n  }\n  if (vnode.componentInstance) {\n    return true; //说明是组件\n  }\n}\n\n// 将虚拟节点渲染成真实DOM\nexport function createElm(vnode) {\n  let { tag, data, children, text } = vnode;\n  if (typeof tag === \"string\") {\n    // 创建真实元素 也要区分是组件还是元素\n    if (createComponent(vnode)) {\n      return vnode.componentInstance.$el;\n    }\n\n    // 将真实节点和虚拟节点对应起来\n    vnode.el = document.createElement(tag);\n    // 给标签附上属性\n    patchProps(vnode.el, {}, data);\n    children.forEach((child) => {\n      // 会将组件创建的元素插入到父元素中\n      vnode.el.appendChild(createElm(child));\n    });\n  } else {\n    // 将文本节点的真实节点和虚拟节点对应起来\n    vnode.el = document.createTextNode(text);\n  }\n  return vnode.el;\n}\n\nexport function patchProps(el, oldProps = {}, props = {}) {\n  /*\n  在进行diff算法的时候，老的标签中存在的属性，而新的标签中不存在，则要删除老的标签中的属性\n*/\n  let oldStyles = oldProps.style || {};\n  let newStyles = props.style || {};\n  for (let key in oldStyles) {\n    //老的样式中有，新的没有，则删除\n    if (!newStyles[key]) {\n      el.style[key] = \"\";\n    }\n  }\n\n  for (let key in props) {\n    //新的样式中有，老的没有 则删除\n    if (!props[key]) {\n      el.removeAttribute(key);\n    }\n  }\n\n  for (let key in props) {\n    if (key === \"style\") {\n      for (let styleName in props.style) {\n        el.style[styleName] = props.style[styleName];\n      }\n    } else {\n      el.setAttribute(key, props[key]);\n    }\n  }\n}\n\nexport function patch(oldVnode, vnode) {\n  // 组件的挂载(执行组件实例.$mount()方法时并未传入el，此时el（el是真实DOM）为null，(在执行后续代码时会执行（vm.$el = patch(el, vnode);） 所以在组件初步渲染的时候oldVnode为空 ，然后直接回去渲染真实DOM并返回))\n  if (!oldVnode) {\n    return createElm(vnode); //vm.$el,对应的就是组件的渲染结果\n  }\n\n  const isRealElement = oldVnode.nodeType;\n  if (isRealElement) {\n    const elm = oldVnode;\n    const parentElm = elm.parentNode;\n    let newElm = createElm(vnode);\n    parentElm.insertBefore(newElm, elm.nextSibling);\n    parentElm.removeChild(elm);\n    return newElm;\n  } else {\n    //   diff算法\n    return patchVnode(oldVnode, vnode);\n  }\n}\n\n// +++++++++++++++++++++++++++\n// diff算法核心 patchVnode的目的：比较属性和子节点\n// +++++++++++++++++++++++++++\nfunction patchVnode(oldVnode, vnode) {\n  /*\n     标签和属性key值：isSameVnode用来比较标签和key是否一致，若不一致，则用新节点直接替换老节点\n     */\n  if (!isSameVnode(oldVnode, vnode)) {\n    let el = createElm(vnode);\n    oldVnode.el.parentNode.replaceChild(el, oldVnode.el);\n    return el;\n  }\n\n  /*\n    文本：判断是否为文本节点，若是为文本节点，则直接更新\n   */\n  /*\n     ==============关于el的指向问题===============\n     el指向的就是oldVnode.el也就是真实DOM节点，在进行diff算法后返回el，最后把el覆盖掉vnode中的el节点\n   */\n  let el = (vnode.el = oldVnode.el); //复用老节点的元素\n  if (!oldVnode.tag) {\n    if (oldVnode.text !== vnode.text) {\n      el.textContent = vnode.text;\n    }\n  }\n  /*\n    标签中的属性：需要对比标签中的属性是否一致\n   */\n  patchProps(el, oldVnode.data, vnode.data);\n  /*\n    儿子节点：一方有儿子，一方没有儿子||两方都有儿子\n   */\n  let oldChildren = oldVnode.children || [];\n  let newChildren = vnode.children || [];\n  if (oldChildren.length > 0 && newChildren.length > 0) {\n    // 新节点和节点都存来儿子的情况\n    updateChildren(el, oldChildren, newChildren);\n  } else if (newChildren.length > 0) {\n    // 老节点不存来儿子，则新节点直接把儿子插入到真实DOM上\n    mountChildren(el, newChildren);\n  } else if (oldChildren.length > 0) {\n    el.innerHTML = \"\";\n  }\n  return el;\n}\n\nfunction mountChildren(el, newChildren) {\n  for (let i = 0; i < newChildren.length; i++) {\n    let child = newChildren[i];\n    el.appendChild(createElm(child));\n  }\n}\n\nfunction updateChildren(el, oldChildren, newChildren) {\n  let oldStartIndex = 0;\n  let newStartIndex = 0;\n  let oldEndIndex = oldChildren.length - 1;\n  let newEndIndex = newChildren.length - 1;\n\n  let oldStartVnode = oldChildren[0];\n  let newStartVnode = newChildren[0];\n\n  let oldEndVnode = oldChildren[oldEndIndex];\n  let newEndVnode = newChildren[newEndIndex];\n\n  // 乱序排序所需要的映射表\n  function makeIndexByKey(children) {\n    let map = {};\n    children.forEach((child, index) => {\n      map[child.key] = index;\n    });\n    return map;\n  }\n\n  let map = makeIndexByKey(oldChildren);\n\n  while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\n    if (!oldStartVnode) {\n      oldStartVnode = oldChildren[++oldStartIndex];\n    } else if (!oldEndVnode) {\n      oldEndVnode = oldChildren[--oldEndIndex];\n    } else if (isSameVnode(oldStartVnode, newStartVnode)) {\n      // 头头对比\n      patchVnode(oldStartVnode, newStartVnode);\n\n      oldStartVnode = oldChildren[++oldStartIndex];\n      newStartVnode = newChildren[++newStartIndex];\n    } else if (isSameVnode(oldEndVnode, newEndVnode)) {\n      //尾尾对比\n      patchVnode(oldEndVnode, newEndVnode);\n\n      oldEndVnode = oldChildren[--oldEndIndex];\n      newEndVnode = newChildren[--newEndIndex];\n    } else if (isSameVnode(oldEndVnode, newStartVnode)) {\n      //头尾对比\n      patchVnode(oldEndVnode, newStartVnode);\n      // 插入到头指针的前面\n      el.insertBefore(oldEndVnode.el, oldStartVnode.el);\n\n      oldEndVnode = oldChildren[--oldEndIndex];\n      newStartVnode = newChildren[++newStartIndex];\n    } else if (isSameVnode(oldStartVnode, newEndVnode)) {\n      // 尾头对比\n      patchVnode(oldStartVnode, newEndVnode);\n      // 插入到尾指针的后面\n      el.insertBefore(oldStartVnode.el, oldEndVnode.el.nextSibling);\n\n      oldStartVnode = oldChildren[++oldStartIndex];\n      newEndVnode = newChildren[--newEndIndex];\n    } else {\n      let moveIndex = map[newStartVnode.key];\n      if (moveIndex !== undefined) {\n        let moveVnode = oldChildren[moveIndex];\n        el.insertBefore(moveVnode.el, oldStartVnode.el);\n        oldChildren[moveIndex] = undefined; //不能直接删除\n        patchVnode(moveVnode, newStartVnode);\n      } else {\n        // 在老节点中找不到新节点的情况直接在老节点中插入新节点\n        el.insertBefore(createElm(newStartVnode), oldStartVnode.el);\n      }\n      newStartVnode = newChildren[++newStartIndex];\n    }\n  }\n  // ++++++++++++++++++++\n  // 新DOM多了 插入\n  // ++++++++++++++++++++\n  if (newStartIndex <= newEndIndex) {\n    for (let i = newStartIndex; i <= newEndIndex; i++) {\n      let childEl = createElm(newChildren[i]);\n      // 新DOM可能向后追加，还有可能是向前追加\n      let anchor = newChildren[newEndIndex + 1]\n        ? newChildren[newEndIndex + 1].el\n        : null;\n      // el.appendChild(childEl);\n      el.insertBefore(childEl, anchor); //anchor 为null的时候则会认为是appendChild\n    }\n  }\n  // ++++++++++++++++++++\n  // 老DOM多了 删除\n  // ++++++++++++++++++++\n  if (oldStartIndex <= oldEndIndex) {\n    for (let i = oldStartIndex; i <= oldEndIndex; i++) {\n      if (oldChildren[i]) {\n        let childEl = oldChildren[i].el;\n        el.removeChild(childEl);\n      }\n    }\n  }\n}\n","import { createElementVNode, createTextVNode } from \"./vdom\";\nimport Watcher from \"./observe/watcher\";\nimport { patch } from \"./vdom/patch\";\n\nexport function initLifeCycle(Vue) {\n  Vue.prototype._update = function (vnode) {\n    // vnode:虚拟DOM;el:真实DOM\n    const vm = this;\n    const el = vm.$el;\n    const prevVnode = vm._vnode;\n    vm._vnode = vnode;\n    if (prevVnode) {\n      vm.$el = patch(prevVnode, vnode);\n    } else {\n      vm.$el = patch(el, vnode);\n    }\n  };\n  Vue.prototype._c = function () {\n    return createElementVNode(this, ...arguments);\n  };\n  Vue.prototype._v = function () {\n    return createTextVNode(this, ...arguments);\n  };\n\n  /*\n  为什么_s返回的value是data中的数据?\n    with(vm){return _v(_s(name)+\"hello\"+_s(age)+\"hello\"))} 访问到vm.name时会触发Object.defineProperty数据代理进而触发get函数返回value值\n */\n  Vue.prototype._s = function (value) {\n    if (typeof value !== \"object\") return value;\n    return JSON.stringify(value);\n  };\n  Vue.prototype._render = function () {\n    return this.$options.render.call(this);\n  };\n}\n\nexport function mountComponent(vm, el) {\n  vm.$el = el;\n\n  // +++++++++++++生命周期+++++++++++++++++\n  // callHook(vm,'beforeMount')\n  // +++++++++++++生命周期+++++++++++++++++\n\n  const updateComponent = () => {\n    // _update:虚拟节点渲染成真实节点\n    // _render:解析DOM节点渲染成虚拟节点\n    vm._update(vm._render());\n  };\n  const watcher = new Watcher(vm, updateComponent, true); //true标识的是一个渲染Watcher\n\n  // +++++++++++++生命周期+++++++++++++++++\n  // callHook(vm,'mounted')\n  // +++++++++++++生命周期+++++++++++++++++\n}\n\nexport function callHook(vm, hook) {\n  const handlers = vm.$options[hook];\n  if (handlers) {\n    handlers.forEach((handler) => handler.call(vm));\n  }\n}\n","const strats = {};\nconst LIFECYCLE = [\"beforeCreate\", \"created\"];\nLIFECYCLE.forEach((hook) => {\n  strats[hook] = function (p, c) {\n    if (c) {\n      if (p) {\n        return p.concat(c);\n      } else {\n        return [c];\n      }\n    } else {\n      return p;\n    }\n  };\n});\n\nstrats.components = function (parentVal, childVal) {\n  const res = Object.create(parentVal);\n\n  if (childVal) {\n    for (let key in childVal) {\n      res[key] = childVal[key];\n    }\n  }\n\n  return res;\n};\n\nexport function mergeOptions(parent, child) {\n  const options = {};\n  for (let key in parent) {\n    mergeField(key);\n  }\n  for (let key in child) {\n    if (!parent.hasOwnProperty(key)) {\n      mergeField(key);\n    }\n  }\n\n  function mergeField(key) {\n    //策略模式 用策略模式减少if/else\n    if (strats[key]) {\n      options[key] = strats[key](parent[key], child[key]);\n    } else {\n      options[key] = child[key] || parent[key];\n    }\n  }\n\n  return options;\n}\n","import { initState } from \"./state\";\nimport { compileToFunction } from \"./compiler\";\nimport { callHook, mountComponent } from \"./lifecycle\";\nimport { mergeOptions } from \"./utils\";\n\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    // vm是实例对象\n    const vm = this;\n    // vm.$options=Vue.options\n    vm.$options = mergeOptions(this.constructor.options, options); //将用户的选项挂载到实例上\n\n    // +++++++++++++生命周期+++++++++++++++++\n    // callHook(vm,'beforeCreate')\n    // +++++++++++++生命周期+++++++++++++++++\n\n    callHook(vm, \"beforeCreate\");\n    // 初始化数据并未将数据渲染到视图中,初始化计算属性，初始化watch\n    initState(vm);\n\n    // +++++++++++++生命周期+++++++++++++++++\n    // callHook(vm,'created')\n    // +++++++++++++生命周期+++++++++++++++++\n\n    callHook(vm, \"created\");\n\n    if (options.el) {\n      vm.$mount(options.el);\n    }\n  };\n  Vue.prototype.$mount = function (el) {\n    const vm = this;\n    el = document.querySelector(el);\n    if (!vm.$options.render) {\n      let template;\n      if (!vm.$options.template && el) {\n        template = el.outerHTML;\n      } else {\n        template = vm.$options.template;\n      }\n      if (template) {\n        const render = compileToFunction(template);\n        vm.$options.render = render;\n      }\n    }\n    mountComponent(vm, el); //组件的挂载\n    // vm.$options.render;\n  };\n}\n","import { mergeOptions } from \"./utils\";\n\nexport function initGlobalAPI(Vue) {\n  Vue.options = {\n    _base: Vue,\n  };\n  // mixin 运用了策略模式和发布订阅模式\n  Vue.mixin = function (mixin) {\n    this.options = mergeOptions(this.options, mixin);\n    return this;\n  };\n  // 创建组件\n  Vue.extend = function (options) {\n    function Sub(options = {}) {\n      this._init(options);\n    }\n    Sub.prototype = Object.create(Vue.prototype); //Sub.prototype.__proto__===Vue.prototype\n    Sub.prototype.constructor = Sub;\n    Sub.options = mergeOptions(Vue.options, options);\n    return Sub;\n  };\n  //全局组件\n  Vue.options.components = {}; //全局的指令 Vue.options.directives\n  Vue.component = function (id, definition) {\n    definition =\n      typeof definition === \"function\" ? definition : Vue.extend(definition);\n    Vue.options.components[id] = definition;\n  };\n}\n","import { initMixin } from \"./init\";\nimport { initLifeCycle } from \"./lifecycle\";\nimport { initStateMixin } from \"./state\";\nimport { initGlobalAPI } from \"./globalAPI\";\nimport { compileToFunction } from \"./compiler\";\n\nfunction Vue(options) {\n  this._init(options);\n}\n\ninitMixin(Vue); //扩展init方法\ninitLifeCycle(Vue); //vm._update vm._render\ninitGlobalAPI(Vue); //全局api的实现\ninitStateMixin(Vue); //实现了nextTick $watch\n\nexport default Vue;\n"],"names":["oldArrayProto","Array","prototype","newArrayProto","Object","create","methods","forEach","method","args","result","call","inserted","ob","__ob__","slice","observeArray","dep","notify","id","Watcher","constructor","vm","exprOrFn","options","cb","renderWatcher","getter","deps","depsId","Set","lazy","dirty","user","value","undefined","get","addDep","has","push","add","addSub","evaluate","pushTarget","popTarget","depend","i","length","update","queueWatcher","run","oldValue","newValue","queue","pending","flushSchedulerQueue","flushQueue","q","watcher","nextTick","callbacks","waiting","flushCallbacks","cbs","timerFunc","Promise","p","resolve","then","MutationObserver","toString","counter","observer","textNode","document","createTextNode","String","observe","characterData","data","setImmediate","setTimeout","Dep","subs","target","stack","pop","Observe","defineProperty","enumerable","isArray","__proto__","walk","keys","key","defineReactive","item","dependArray","current","childOb","set","initState","$options","initData","computed","initComputed","watch","initWatch","handler","console","log","createWatcher","$watch","proxy","_data","watchers","_computedWatchers","userDef","fn","defineComputed","setter","createComputedGetter","initStateMixin","Vue","$nextTick","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","ELEMENT_TYPE","TEXT_TYPE","currentParent","root","createASTElement","tag","attrs","type","children","parent","start","node","chars","text","replace","end","advance","n","substring","parseStartTag","match","tagName","attr","name","textEnd","indexOf","startTagMatch","endTagMatch","defaultTagRE","genProps","str","obj","split","JSON","stringify","gen","codegen","test","tokens","lastIndex","exec","index","trim","join","genChildren","map","child","ast","code","compileToFunction","template","render","Function","isReservedTagg","includes","createElementVNode","vnode","Ctor","components","createComponentVnode","_base","extend","hook","init","instance","componentInstance","componentOptions","$mount","createTextVNode","isSameVnode","oldVnode","newVnode","createComponent","createElm","$el","el","createElement","patchProps","appendChild","oldProps","props","oldStyles","style","newStyles","removeAttribute","styleName","setAttribute","patch","isRealElement","nodeType","elm","parentElm","parentNode","newElm","insertBefore","nextSibling","removeChild","patchVnode","replaceChild","textContent","oldChildren","newChildren","updateChildren","mountChildren","innerHTML","oldStartIndex","newStartIndex","oldEndIndex","newEndIndex","oldStartVnode","newStartVnode","oldEndVnode","newEndVnode","makeIndexByKey","moveIndex","moveVnode","childEl","anchor","initLifeCycle","_update","prevVnode","_vnode","_c","arguments","_v","_s","_render","mountComponent","updateComponent","callHook","handlers","strats","LIFECYCLE","c","concat","parentVal","childVal","res","mergeOptions","mergeField","hasOwnProperty","initMixin","_init","querySelector","outerHTML","initGlobalAPI","mixin","Sub","component","definition"],"mappings":"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"}